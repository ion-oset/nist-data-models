# generated by datamodel-codegen:
#   filename:  NIST_V0_cast_vote_records.json

from __future__ import annotations

from datetime import datetime
from enum import Enum
from typing import List, Optional, Union

from pydantic import AnyUrl, Extra, Field
# Note: *not* StrictFloat
from pydantic import StrictBool, StrictInt, StrictStr
from typing_extensions import Literal

from electos.datamodels.nist.models.base import NistModel


# --- Enumerations


class AllocationStatus(Enum):
    NO = "no"
    UNKNOWN = "unknown"
    YES = "yes"


class CastVoteRecordVersion(Enum):
    FIELD_1_0_0 = "1.0.0"


class ContestSelectionStatus(Enum):
    GENERATED_RULES = "generated-rules"
    INVALIDATED_RULES = "invalidated-rules"
    NEEDS_ADJUDICATION = "needs-adjudication"
    OTHER = "other"


class ContestStatus(Enum):
    INVALIDATED_RULES = "invalidated-rules"
    NOT_INDICATED = "not-indicated"
    OTHER = "other"
    OVERVOTED = "overvoted"
    UNDERVOTED = "undervoted"


class CVRStatus(Enum):
    NEEDS_ADJUDICATION = "needs-adjudication"
    OTHER = "other"


class CVRType(Enum):
    INTERPRETED = "interpreted"
    MODIFIED = "modified"
    ORIGINAL = "original"


class HashType(Enum):
    MD6 = "md6"
    OTHER = "other"
    SHA_256 = "sha-256"
    SHA_512 = "sha-512"


class IdentifierType(Enum):
    FIPS = "fips"
    LOCAL_LEVEL = "local-level"
    NATIONAL_LEVEL = "national-level"
    OCD_ID = "ocd-id"
    OTHER = "other"
    STATE_LEVEL = "state-level"


class IndicationStatus(Enum):
    NO = "no"
    UNKNOWN = "unknown"
    YES = "yes"


class PositionStatus(Enum):
    ADJUDICATED = "adjudicated"
    GENERATED_RULES = "generated-rules"
    INVALIDATED_RULES = "invalidated-rules"
    OTHER = "other"


class ReportType(Enum):
    ADJUDICATED = "adjudicated"
    AGGREGATED = "aggregated"
    ORIGINATING_DEVICE_EXPORT = "originating-device-export"
    OTHER = "other"
    RCV_ROUND = "rcv-round"


class ReportingUnitType(Enum):
    COMBINED_PRECINCT = "combined-precinct"
    OTHER = "other"
    POLLING_PLACE = "polling-place"
    PRECINCT = "precinct"
    SPLIT_PRECINCT = "split-precinct"
    VOTE_CENTER = "vote-center"


class VoteVariation(Enum):
    APPROVAL = "approval"
    BORDA = "borda"
    CUMULATIVE = "cumulative"
    MAJORITY = "majority"
    N_OF_M = "n-of-m"
    OTHER = "other"
    PLURALITY = "plurality"
    PROPORTIONAL = "proportional"
    RANGE = "range"
    RCV = "rcv"
    SUPER_MAJORITY = "super-majority"


# --- Models


class Annotation(NistModel):

    model__type: Literal["CVR.Annotation"] = Field(..., alias="@type")

    adjudicator_name: Optional[List[StrictStr]] = Field(None, min_items=0)
    message: Optional[List[StrictStr]] = Field(None, min_items=0)
    time_stamp: Optional[datetime] = None


class Code(NistModel):

    model__type: Literal["CVR.Code"] = Field(..., alias="@type")

    label: Optional[StrictStr] = None
    other_type: Optional[StrictStr] = None
    type: IdentifierType
    value: StrictStr


class File(NistModel):

    model__type: Literal["CVR.File"] = Field(..., alias="@type")

    data: StrictStr
    file_name: Optional[StrictStr] = None
    mime_type: Optional[StrictStr] = None


class FractionalNumber(NistModel):

    # Note: 'StrictStr' cannot be constrained.
    # Field declaration makes this effectively 'ConstrainedStr'.
    __root__: str = Field(..., regex="([0-9]+/[1-9]+[0-9]*)|(\\.[0-9]+)")


class Hash(NistModel):

    model__type: Literal["CVR.Hash"] = Field(..., alias="@type")

    other_type: Optional[StrictStr] = None
    type: HashType
    value: StrictStr


class Image(NistModel):

    model__type: Literal["CVR.Image"] = Field(..., alias="@type")

    data: StrictStr
    file_name: Optional[StrictStr] = None
    mime_type: Optional[StrictStr] = None


class ImageData(NistModel):

    model__type: Literal["CVR.ImageData"] = Field(..., alias="@type")

    hash: Optional[Hash] = None
    image: Optional[Image] = None
    location: Optional[AnyUrl] = None


class ReportingDevice(NistModel):

    model__id: StrictStr = Field(..., alias="@id")
    model__type: Literal["CVR.ReportingDevice"] = Field(..., alias="@type")

    application: Optional[StrictStr] = None
    code: Optional[List[Code]] = Field(None, min_items=0)
    manufacturer: Optional[StrictStr] = None
    mark_metric_type: Optional[StrictStr] = None
    model: Optional[StrictStr] = None
    notes: Optional[List[StrictStr]] = Field(None, min_items=0)
    serial_number: Optional[StrictStr] = None


class GpUnit(NistModel):

    model__id: StrictStr = Field(..., alias="@id")
    model__type: Literal["CVR.GpUnit"] = Field(..., alias="@type")

    code: Optional[List[Code]] = Field(None, min_items=0)
    name: Optional[StrictStr] = None
    other_type: Optional[StrictStr] = None
    reporting_device_ids: Optional[List[StrictStr]] = Field(None, min_items=0)
    type: ReportingUnitType


class BallotMeasureSelection(NistModel):

    model__id: StrictStr = Field(..., alias="@id")
    model__type: Literal["CVR.BallotMeasureSelection"] = Field(..., alias="@type")

    code: Optional[List[Code]] = Field(None, min_items=0)
    selection: StrictStr


class CandidateSelection(NistModel):

    model__id: StrictStr = Field(..., alias="@id")
    model__type: Literal["CVR.CandidateSelection"] = Field(..., alias="@type")

    candidate_ids: Optional[List[StrictStr]] = Field(None, min_items=0)
    code: Optional[List[Code]] = Field(None, min_items=0)
    is_write_in: Optional[StrictBool] = None


class ContestSelection(NistModel):

    model__id: StrictStr = Field(..., alias="@id")
    model__type: Literal["CVR.ContestSelection"] = Field(..., alias="@type")
    Code: Optional[List[Code]] = Field(None, min_items=0)


class PartySelection(NistModel):

    model__id: StrictStr = Field(..., alias="@id")
    model__type: Literal["CVR.PartySelection"] = Field(..., alias="@type")

    code: Optional[List[Code]] = Field(None, min_items=0)
    party_ids: List[StrictStr] = Field(..., min_items=1)


class Party(NistModel):

    model__id: StrictStr = Field(..., alias="@id")
    model__type: Literal["CVR.Party"] = Field(..., alias="@type")

    abbreviation: Optional[StrictStr] = None
    code: Optional[List[Code]] = Field(None, min_items=0)
    name: Optional[StrictStr] = None


class Candidate(NistModel):

    model__id: StrictStr = Field(..., alias="@id")
    model__type: Literal["CVR.Candidate"] = Field(..., alias="@type")

    code: Optional[List[Code]] = Field(None, min_items=0)
    name: Optional[StrictStr] = None
    party_id: Optional[StrictStr] = None


class Contest(NistModel):

    model__id: StrictStr = Field(..., alias="@id")
    model__type: Literal["CVR.Contest"] = Field(..., alias="@type")

    abbreviation: Optional[StrictStr] = None
    code: Optional[List[Code]] = Field(None, min_items=0)
    contest_selection: List[
        Union[
            ContestSelection, PartySelection, BallotMeasureSelection, CandidateSelection
        ]
    ] = Field(..., min_items=1)
    name: Optional[StrictStr] = None
    other_vote_variation: Optional[StrictStr] = None
    vote_variation: Optional[VoteVariation] = None


class BallotMeasureContest(NistModel):

    model__id: StrictStr = Field(..., alias="@id")
    model__type: Literal["CVR.BallotMeasureContest"] = Field(..., alias="@type")

    abbreviation: Optional[StrictStr] = None
    code: Optional[List[Code]] = Field(None, min_items=0)
    contest_selection: List[
        Union[
            ContestSelection, PartySelection, BallotMeasureSelection, CandidateSelection
        ]
    ] = Field(..., min_items=1)
    name: Optional[StrictStr] = None
    other_vote_variation: Optional[StrictStr] = None
    vote_variation: Optional[VoteVariation] = None


class CandidateContest(NistModel):

    model__id: StrictStr = Field(..., alias="@id")
    model__type: Literal["CVR.CandidateContest"] = Field(..., alias="@type")

    abbreviation: Optional[StrictStr] = None
    code: Optional[List[Code]] = Field(None, min_items=0)
    contest_selection: List[
        Union[
            ContestSelection, PartySelection, BallotMeasureSelection, CandidateSelection
        ]
    ] = Field(..., min_items=1)
    name: Optional[StrictStr] = None
    number_elected: Optional[StrictInt] = None
    other_vote_variation: Optional[StrictStr] = None
    primary_party_id: Optional[StrictStr] = None
    vote_variation: Optional[VoteVariation] = None
    votes_allowed: Optional[StrictInt] = None


class PartyContest(NistModel):

    model__id: StrictStr = Field(..., alias="@id")
    model__type: Literal["CVR.PartyContest"] = Field(..., alias="@type")

    abbreviation: Optional[StrictStr] = None
    code: Optional[List[Code]] = Field(None, min_items=0)
    contest_selection: List[
        Union[
            ContestSelection, PartySelection, BallotMeasureSelection, CandidateSelection
        ]
    ] = Field(..., min_items=1)
    name: Optional[StrictStr] = None
    other_vote_variation: Optional[StrictStr] = None
    vote_variation: Optional[VoteVariation] = None


class RetentionContest(NistModel):

    model__id: StrictStr = Field(..., alias="@id")
    model__type: Literal["CVR.RetentionContest"] = Field(..., alias="@type")

    abbreviation: Optional[StrictStr] = None
    candidate_id: Optional[StrictStr] = None
    code: Optional[List[Code]] = Field(None, min_items=0)
    contest_selection: List[
        Union[
            ContestSelection, PartySelection, BallotMeasureSelection, CandidateSelection
        ]
    ] = Field(..., min_items=1)
    name: Optional[StrictStr] = None
    other_vote_variation: Optional[StrictStr] = None
    vote_variation: Optional[VoteVariation] = None


class CVRWriteIn(NistModel):

    model__type: Literal["CVR.CVRWriteIn"] = Field(..., alias="@type")

    text: Optional[StrictStr] = None
    write_in_image: Optional[ImageData] = None


class SelectionPosition(NistModel):

    model__type: Literal["CVR.SelectionPosition"] = Field(..., alias="@type")

    cvr_write_in: Optional[CVRWriteIn] = Field(None, alias = "CVRWriteIn")
    code: Optional[List[Code]] = Field(None, min_items=0)
    fractional_votes: Optional[FractionalNumber] = None
    has_indication: IndicationStatus
    is_allocable: Optional[AllocationStatus] = None
    is_generated: Optional[StrictBool] = None
    mark_metric_value: Optional[List[StrictStr]] = Field(None, min_items=0)
    number_votes: StrictInt
    other_status: Optional[StrictStr] = None
    position: Optional[StrictInt] = None
    rank: Optional[StrictInt] = None
    status: Optional[List[PositionStatus]] = Field(None, min_items=0)


class CVRContestSelection(NistModel):

    model__type: Literal["CVR.CVRContestSelection"] = Field(..., alias="@type")

    contest_selection_id: Optional[StrictStr] = None
    option_position: Optional[StrictInt] = None
    other_status: Optional[StrictStr] = None
    rank: Optional[StrictInt] = None
    selection_position: List[SelectionPosition] = Field(..., min_items=1)
    status: Optional[List[ContestSelectionStatus]] = Field(None, min_items=0)
    total_fractional_votes: Optional[FractionalNumber] = None
    total_number_votes: Optional[StrictInt] = None


class CVRContest(NistModel):

    model__type: Literal["CVR.CVRContest"] = Field(..., alias="@type")

    cvr_contest_selection: Optional[List[CVRContestSelection]] = Field(None, min_items=0, alias = "CVRContestSelection")
    contest_id: StrictStr
    other_status: Optional[StrictStr] = None
    overvotes: Optional[StrictInt] = None
    selections: Optional[StrictInt] = None
    status: Optional[List[ContestStatus]] = Field(None, min_items=0)
    undervotes: Optional[StrictInt] = None
    write_ins: Optional[StrictInt] = None


class CVRSnapshot(NistModel):

    model__id: StrictStr = Field(..., alias="@id")
    model__type: Literal["CVR.CVRSnapshot"] = Field(..., alias="@type")

    annotation: Optional[List[Annotation]] = Field(None, min_items=0)
    cvr_contest: Optional[List[CVRContest]] = Field(None, min_items=0, alias = "CVRContest")
    other_status: Optional[StrictStr] = None
    status: Optional[List[CVRStatus]] = Field(None, min_items=0)
    type: CVRType


class CVR(NistModel):

    model__type: Literal["CVR.CVR"] = Field(..., alias="@type")

    ballot_audit_id: Optional[StrictStr] = None
    ballot_image: Optional[List[ImageData]] = Field(None, min_items=0)
    ballot_pre_printed_id: Optional[StrictStr] = None
    ballot_sheet_id: Optional[StrictStr] = None
    ballot_style_id: Optional[StrictStr] = None
    ballot_style_unit_id: Optional[StrictStr] = None
    batch_id: Optional[StrictStr] = None
    batch_sequence_id: Optional[StrictInt] = None
    cvr_snapshot: List[CVRSnapshot] = Field(..., min_items=1, alias = "CVRSnapshot")
    creating_device_id: Optional[StrictStr] = None
    current_snapshot_id: StrictStr
    election_id: StrictStr
    party_ids: Optional[List[StrictStr]] = Field(None, min_items=0)
    unique_id: Optional[StrictStr] = None


class Election(NistModel):

    model__id: StrictStr = Field(..., alias="@id")
    model__type: Literal["CVR.Election"] = Field(..., alias="@type")

    candidate: Optional[List[Candidate]] = Field(None, min_items=0)
    code: Optional[List[Code]] = Field(None, min_items=0)
    contest: List[
        Union[
            Contest,
            PartyContest,
            BallotMeasureContest,
            CandidateContest,
            RetentionContest,
        ]
    ] = Field(..., min_items=1)
    election_scope_id: StrictStr
    name: Optional[StrictStr] = None


class CastVoteRecordReport(NistModel):

    model__type: Literal["CVR.CastVoteRecordReport"] = Field(..., alias="@type")

    cvr: Optional[List[CVR]] = Field(None, min_items=0, alias = "CVR")
    election: List[Election] = Field(..., min_items=1)
    generated_date: datetime
    gp_unit: List[GpUnit] = Field(..., min_items=1)
    notes: Optional[StrictStr] = None
    other_report_type: Optional[StrictStr] = None
    party: Optional[List[Party]] = Field(None, min_items=0)
    report_generating_device_ids: List[StrictStr] = Field(..., min_items=1)
    report_type: Optional[List[ReportType]] = Field(None, min_items=0)
    reporting_device: List[ReportingDevice] = Field(..., min_items=1)
    version: CastVoteRecordVersion
